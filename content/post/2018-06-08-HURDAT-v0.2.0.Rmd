---
# General format taken from <https://dev.to/yelluw/how-to-do-technical-blogging>

# Title
#   - Short title, start with verb, provide brief explanation what this is about.
#   - Examples:
#     - Writing a $technology $thing
#     - Developing with $technology
#     - Testing $techonology with $thing
title: HURDAT v0.2.0

# Summary
#   - 2-3 sentences. 
#   - Summarize what post is about.
#   - Should be closely related to title
#   - Should be smooth transition from title
summary: > 
  HURDAT v0.2.0 has recently been released in CRAN. The new release contains all 
  tropical cyclones for the 2017 season, Atlantic and east Pacific basins. 

# Description is not used at this time but may be implemented later.
description: NULL

# Abstract is not used at this time but may be implemented later.
abstract: NULL

author: Tim Trice
date: '2018-06-08'

# Slug
#   - Use title without conjunctions and determiners.
#   - All lower-case.
# slug: hurdat-v0.2.0

# Categories
#   - General classification of post.
#     - SQL
#     - R
#     - Python
categories:
  - R

# Tags
#   - Calls specific to category such as functions, or classes.
#     - In SQL, "SELECT", "ORDER BY", "PARTITION", etc.
#     - In R, "dplyr", "rattle", "vector", etc."
tags:
  - HURDAT

output:
    blogdown::html_page:
        toc: true
        toc_depth: 6
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE)
```

```{r, echo = FALSE, message = FALSE}
knitr::opts_chunk$set(fig.width = 10)
```

```{r libraries}
library(HURDAT)
library(lubridate)
library(patchwork)
library(tidyverse)
```

```{r}
df <- union(mutate(AL, Basin = "Atlantic"), 
            mutate(EP, Basin = "East Pacific"))
```

```{r}
df %>% 
  group_by(Basin, 
           Year = year(DateTime)) %>% 
  summarise(Storms = n_distinct(Key)) %>% 
  mutate(Decade = paste0(10 * floor(Year/10), "'s")) %>% 
  ggplot(aes(x = Year, y = Storms, fill = Decade, color = Decade)) + 
  geom_ribbon(aes(ymin = 0, ymax = Storms), alpha = 0.35, color = NA) + 
  geom_line(size = 0.5) + 
  facet_wrap(~Basin, ncol = 1) + 
  scale_x_continuous(limits = c(1851, 2018), 
                     breaks = seq(1850, 2020, by = 20), 
                     minor_breaks = seq(1850, 2020, by = 10), 
                     expand = c(0, 0)) + 
  scale_y_continuous(limits = c(0, 35), 
                     expand = c(0, 0)) + 
  theme_bw() + 
  theme(legend.position = "none", 
        strip.text = element_text(size = 10, color = "white", face = "bold", hjust = 1), 
        strip.background = element_rect(fill = "#0090EA")) + 
  labs(title = "Tropical cyclones by decade", 
       subtitle = "Introduction of weather satellites in 1960's", 
       caption = sprintf("@timtrice, HURDAT %s", packageVersion("HURDAT")))
```
