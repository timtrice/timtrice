---
# General format taken from <https://dev.to/yelluw/how-to-do-technical-blogging>

# Title
#   - Short title, start with verb, provide brief explanation what this is about.
#   - Examples:
#     - Writing a $technology $thing
#     - Developing with $technology
#     - Testing $techonology with $thing
title: HURDAT v0.2.0

# Summary
#   - 2-3 sentences. 
#   - Summarize what post is about.
#   - Should be closely related to title
#   - Should be smooth transition from title
summary: > 
  HURDAT v0.2.0 has recently been released in CRAN. The new release contains all 
  tropical cyclones for the 2017 season, Atlantic and east Pacific basins. 

# Description is not used at this time but may be implemented later.
description: NULL

# Abstract is not used at this time but may be implemented later.
abstract: NULL

author: Tim Trice
date: '2018-06-08'

# Slug
#   - Use title without conjunctions and determiners.
#   - All lower-case.
# slug: hurdat-v0.2.0

# Categories
#   - General classification of post.
#     - SQL
#     - R
#     - Python
categories:
  - R

# Tags
#   - Calls specific to category such as functions, or classes.
#     - In SQL, "SELECT", "ORDER BY", "PARTITION", etc.
#     - In R, "dplyr", "rattle", "vector", etc."
tags:
  - HURDAT

output:
    blogdown::html_page:
        toc: true
        toc_depth: 6
---


<div id="TOC">
<ul>
<li><a href="#atlantic-basin">Atlantic Basin</a></li>
<li><a href="#east-pacific-basin">East Pacific Basin</a></li>
</ul>
</div>

<pre class="r"><code>library(HURDAT)
library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 2.2.1     ✔ purrr   0.2.5
## ✔ tibble  1.4.2     ✔ dplyr   0.7.5
## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
## ✔ readr   1.1.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ lubridate::as.difftime() masks base::as.difftime()
## ✖ lubridate::date()        masks base::date()
## ✖ dplyr::filter()          masks stats::filter()
## ✖ lubridate::intersect()   masks base::intersect()
## ✖ dplyr::lag()             masks stats::lag()
## ✖ lubridate::setdiff()     masks base::setdiff()
## ✖ lubridate::union()       masks base::union()</code></pre>
<div id="atlantic-basin" class="section level2">
<h2>Atlantic Basin</h2>
<pre class="r"><code>AL %&gt;% 
  group_by(Key) %&gt;% 
  summarise(Month = month(first(DateTime))) %&gt;% 
  ggplot(aes(x = Month)) + 
  geom_bar() + 
  scale_x_discrete(labels = c(month.abb), 
                   limits = c(1:12), 
                   expand = c(0.05, 0.05)) + 
  labs(title = &quot;Atlantic Basin Tropical Cyclones&quot;, 
       subtitle = sprintf(&quot;Cumulative, by month (%s - %s)&quot;, 
                          year(first(AL$DateTime)), 
                          year(last(AL$DateTime))), 
       caption = &quot;@timtrice source: HURDAT v0.2.0&quot;, 
       y = &quot;Total&quot;)</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-2-1.png" width="960" /></p>
<pre class="r"><code>AL %&gt;% 
  group_by(Key, Year = year(DateTime)) %&gt;% 
  summarise(MaxWind = max(Wind, na.rm = TRUE)) %&gt;% 
  filter(!is.infinite(MaxWind)) %&gt;% 
  mutate(Class = case_when(
    MaxWind &lt;= 33 ~ &quot;TD&quot;, 
    MaxWind &lt;= 64 ~ &quot;TS&quot;, 
    TRUE          ~ &quot;HU&quot;
  )) %&gt;% 
  group_by(Year, Class) %&gt;% 
  summarise(Storms = n()) %&gt;% 
  spread(Class, Storms) %&gt;% 
  mutate(Total = sum(HU, TD, TS, na.rm = TRUE)) %&gt;% 
  ungroup() %&gt;% 
  top_n(10L, wt = Total) %&gt;% 
  arrange(desc(Total))</code></pre>
<pre><code>## # A tibble: 10 x 5
##     Year    HU    TD    TS Total
##    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2005    15     2    14    31
##  2  1969    12    11     6    29
##  3  1978     5    12     7    24
##  4  1975     6    14     3    23
##  5  1971     6     9     7    22
##  6  1981     7    10     5    22
##  7  1976     6    11     4    21
##  8  1995    11     2     8    21
##  9  2003     7     5     9    21
## 10  2010    12     2     7    21</code></pre>
<pre class="r"><code>AL %&gt;% 
  group_by(Key, Year = year(DateTime)) %&gt;% 
  summarise(MaxWind = max(Wind, na.rm = TRUE)) %&gt;% 
  filter(!is.infinite(MaxWind)) %&gt;% 
  mutate(Class = case_when(
    MaxWind &lt;= 33 ~ &quot;TD&quot;, 
    MaxWind &lt;= 64 ~ &quot;TS&quot;, 
    TRUE          ~ &quot;HU&quot;
  )) %&gt;% 
  group_by(Year, Class) %&gt;% 
  summarise(Storms = n()) %&gt;% 
  ggplot(aes(x = Year, y = Storms, fill = Class)) + 
  geom_histogram(stat = &quot;identity&quot;) + 
  scale_x_continuous(limits = c(1851, 2017), 
                     breaks = seq(1850, 2020, by = 50), 
                     minor_breaks = seq(1850, 2020, by = 10))</code></pre>
<pre><code>## Warning: Ignoring unknown parameters: binwidth, bins, pad</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
<pre class="r"><code>AL %&gt;%
  select(Wind, Pressure) %&gt;% 
  filter(!is.na(Pressure)) %&gt;% 
  sample_n(size = 1000L) %&gt;% 
  ggplot(aes(x = Wind, y = Pressure)) + 
  geom_point() + 
  geom_smooth(method = &quot;loess&quot;)</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
</div>
<div id="east-pacific-basin" class="section level2">
<h2>East Pacific Basin</h2>
<pre class="r"><code>EP %&gt;% 
  group_by(Key) %&gt;% 
  summarise(Month = month(first(DateTime))) %&gt;% 
  ggplot(aes(x = Month)) + 
  geom_bar() + 
  scale_x_discrete(labels = c(month.abb), 
                   limits = c(1:12), 
                   expand = c(0.05, 0.05)) + 
  labs(title = &quot;East Pacific Basin Tropical Cyclones&quot;, 
       subtitle = sprintf(&quot;Cumulative, by month (%s - %s)&quot;, 
                          year(first(EP$DateTime)), 
                          year(last(EP$DateTime))), 
       caption = &quot;@timtrice source: HURDAT v0.2.0&quot;, 
       y = &quot;Total&quot;)</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-6-1.png" width="960" /></p>
<pre class="r"><code>EP %&gt;% 
  group_by(Key, Year = year(DateTime)) %&gt;% 
  summarise(MaxWind = max(Wind, na.rm = TRUE)) %&gt;% 
  filter(!is.infinite(MaxWind)) %&gt;% 
  mutate(Class = case_when(
    MaxWind &lt;= 33 ~ &quot;TD&quot;, 
    MaxWind &lt;= 64 ~ &quot;TS&quot;, 
    TRUE          ~ &quot;HU&quot;
  )) %&gt;% 
  group_by(Year, Class) %&gt;% 
  summarise(Storms = n()) %&gt;% 
  ggplot(aes(x = Year, y = Storms, fill = Class)) + 
  geom_histogram(stat = &quot;identity&quot;) + 
  scale_x_continuous(limits = c(1949, 2017), 
                     breaks = seq(1949, 2017, by = 10), 
                     minor_breaks = seq(1949, 2017, by = 5))</code></pre>
<pre><code>## Warning: Ignoring unknown parameters: binwidth, bins, pad</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-7-1.png" width="960" /></p>
<pre class="r"><code>EP %&gt;%
  select(Wind, Pressure) %&gt;% 
  filter(!is.na(Pressure)) %&gt;% 
  sample_n(size = 1000L) %&gt;% 
  ggplot(aes(x = Wind, y = Pressure)) + 
  geom_point() + 
  geom_smooth(method = &quot;loess&quot;)</code></pre>
<p><img src="/post/2018-06-08-HURDAT-v0.2.0_files/figure-html/unnamed-chunk-8-1.png" width="960" /></p>
</div>
